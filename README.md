Hari Sekhon - DevOps Perl Tools
===============================

[![Codacy](https://api.codacy.com/project/badge/Grade/1769cc854b5246968ee2bae1818f771a)](https://www.codacy.com/app/harisekhon/devops-perl-tools)
[![CodeFactor](https://www.codefactor.io/repository/github/harisekhon/DevOps-Perl-tools/badge)](https://www.codefactor.io/repository/github/harisekhon/DevOps-Perl-tools)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_DevOps-Perl-tools&metric=alert_status)](https://sonarcloud.io/dashboard?id=HariSekhon_DevOps-Perl-tools)
[![Maintainability Rating](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_DevOps-Perl-tools&metric=sqale_rating)](https://sonarcloud.io/dashboard?id=HariSekhon_DevOps-Perl-tools)
[![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_DevOps-Perl-tools&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=HariSekhon_DevOps-Perl-tools)
[![Security Rating](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_DevOps-Perl-tools&metric=security_rating)](https://sonarcloud.io/dashboard?id=HariSekhon_DevOps-Perl-tools)
[![Code Inspector Grade](https://www.code-inspector.com/project/4745/status/svg)](https://frontend.code-inspector.com/project/4745/dashboard)
[![Code Inspector Score](https://www.code-inspector.com/project/4745/score/svg)](https://frontend.code-inspector.com/project/4745/dashboard)
[![GitHub stars](https://img.shields.io/github/stars/harisekhon/devops-perl-tools?logo=github)](https://github.com/harisekhon/devops-perl-tools/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/harisekhon/devops-perl-tools?logo=github)](https://github.com/harisekhon/devops-perl-tools/network)
[![GitHub Last Commit](https://img.shields.io/github/last-commit/HariSekhon/DevOps-Perl-tools?logo=github)](https://github.com/HariSekhon/DevOps-Perl-tools/commits/master)
[![Lines of Code](https://img.shields.io/badge/lines%20of%20code-9.1k-lightgrey?logo=codecademy)](https://github.com/HariSekhon/DevOps-Perl-tools)

[![Linux](https://img.shields.io/badge/OS-Linux-blue?logo=linux)](https://github.com/harisekhon/DevOps-Perl-tools)
[![Mac](https://img.shields.io/badge/OS-Mac-blue?logo=apple)](https://github.com/harisekhon/DevOps-Perl-tools)
[![Docker](https://img.shields.io/badge/container-Docker-blue?logo=docker)](https://hub.docker.com/r/harisekhon/perl-tools/)
[![DockerHub Pulls](https://img.shields.io/docker/pulls/harisekhon/perl-tools?label=DockerHub%20pulls&logo=docker)](https://hub.docker.com/r/harisekhon/perl-tools)
[![DockerHub Build Automated](https://img.shields.io/docker/automated/harisekhon/perl-tools?logo=docker)](https://hub.docker.com/r/harisekhon/perl-tools/)
[![StarTrack](https://img.shields.io/badge/Star-Track-blue?logo=github)](https://seladb.github.io/StarTrack-js/#/preload?r=HariSekhon,Nagios-Plugins&r=HariSekhon,Dockerfiles&r=HariSekhon,DevOps-Python-tools&r=HariSekhon,DevOps-Perl-tools&r=HariSekhon,DevOps-Bash-tools&r=HariSekhon,HAProxy-configs&r=HariSekhon,SQL-scripts)
[![StarCharts](https://img.shields.io/badge/Star-Charts-blue?logo=github)](https://github.com/HariSekhon/DevOps-Bash-tools/blob/master/STARCHARTS.md)
<!-- these badges don't work any more
[![Docker Build Status](https://img.shields.io/docker/cloud/build/harisekhon/perl-tools?logo=docker)](https://hub.docker.com/r/harisekhon/perl-tools/builds)
[![MicroBadger](https://images.microbadger.com/badges/image/harisekhon/perl-tools.svg)](http://microbadger.com/#/images/harisekhon/perl-tools)
-->

[![CI Builds Overview](https://img.shields.io/badge/CI%20Builds-Overview%20Page-blue?logo=circleci)](https://bitbucket.org/harisekhon/devops-bash-tools/src/master/STATUS.md)
[![Jenkins](https://img.shields.io/badge/Jenkins-ready-blue?logo=jenkins&logoColor=white)](https://github.com/HariSekhon/DevOps-Perl-tools/blob/master/Jenkinsfile)
[![Concourse](https://img.shields.io/badge/Concourse-ready-blue?logo=concourse)](https://github.com/HariSekhon/DevOps-Perl-tools/blob/master/.concourse.yml)
[![GoCD](https://img.shields.io/badge/GoCD-ready-blue?logo=go)](https://github.com/HariSekhon/DevOps-Perl-tools/blob/master/.gocd.yml)
[![TeamCity](https://img.shields.io/badge/TeamCity-ready-blue?logo=teamcity)](https://github.com/HariSekhon/TeamCity-CI)

[![Travis CI](https://img.shields.io/travis/harisekhon/DevOps-Perl-tools/master?logo=travis&label=Travis%20CI)](https://travis-ci.org/HariSekhon/DevOps-Perl-tools)
[![AppVeyor](https://img.shields.io/appveyor/build/harisekhon/DevOps-Perl-tools/master?logo=appveyor&label=AppVeyor)](https://ci.appveyor.com/project/HariSekhon/DevOps-Perl-tools/branch/master)
[![Drone](https://img.shields.io/drone/build/HariSekhon/DevOps-Perl-tools/master?logo=drone&label=Drone)](https://cloud.drone.io/HariSekhon/DevOps-Perl-tools)
[![CircleCI](https://circleci.com/gh/HariSekhon/DevOps-Perl-tools.svg?style=svg)](https://circleci.com/gh/HariSekhon/DevOps-Perl-tools)
[![Codeship Status for HariSekhon/DevOps-Perl-tools](https://app.codeship.com/projects/c9e3bf70-3c5f-0138-d157-661d474a0ccb/status?branch=master)](https://app.codeship.com/projects/387254)
[![Shippable](https://img.shields.io/shippable/5e52c6364c324200063326d5/master?label=Shippable&logo=jfrog)](https://app.shippable.com/github/HariSekhon/DevOps-Perl-tools/dashboard/jobs)
[![Codefresh](https://g.codefresh.io/api/badges/pipeline/harisekhon/GitHub%2FDevOps-Perl-tools?branch=master&key=eyJhbGciOiJIUzI1NiJ9.NWU1MmM5OGNiM2FiOWUzM2Y3ZDZmYjM3.O69674cW7vYom3v5JOGKXDbYgCVIJU9EWhXUMHl3zwA&type=cf-1)](https://g.codefresh.io/pipelines/edit/new/builds?id=5e58e2a9c1d3cf1248fa485b&pipeline=DevOps-Perl-tools&projects=GitHub&projectId=5e52ca8ea284e00f882ea992&context=github&filter=page:1;pageSize:10;timeFrameStart:week)
[![BuildKite](https://img.shields.io/buildkite/0a23f5b0b09f6b2a913e3e3fa258494edb0e8dcda2b40e19fa/master?label=BuildKite&logo=buildkite)](https://buildkite.com/hari-sekhon/devops-perl-tools)
[![buddy pipeline](https://app.buddy.works/harisekhon/devops-perl-tools/pipelines/pipeline/246987/badge.svg?token=7f63afa3c423a65e6e39a79be0386959e98c4105ea1e20f7f8b05d6d6b587038 "buddy pipeline")](https://app.buddy.works/harisekhon/devops-perl-tools/pipelines/pipeline/246987)
[![Cirrus CI](https://img.shields.io/cirrus/github/HariSekhon/DevOps-Perl-tools/master?logo=Cirrus%20CI&label=Cirrus%20CI)](https://cirrus-ci.com/github/HariSekhon/DevOps-Perl-tools)
[![Semaphore](https://harisekhon.semaphoreci.com/badges/DevOps-Perl-tools.svg)](https://harisekhon.semaphoreci.com/projects/DevOps-Perl-tools)
[![Wercker](https://app.wercker.com/status/1f2132ff1c5b4098e3321456e67f54db/s/master "wercker status")](https://app.wercker.com/harisekhon/DevOps-Perl-tools/runs)
<!--[![Wercker](https://img.shields.io/wercker/ci/5e58ef724fb3d108006b2038/master?label=Wercker&logo=oracle)](https://app.wercker.com/harisekhon/DevOps-Perl-tools/runs)-->

[![Azure DevOps Pipeline](https://dev.azure.com/harisekhon/GitHub/_apis/build/status/HariSekhon.DevOps-Perl-tools?branchName=master)](https://dev.azure.com/harisekhon/GitHub/_build/latest?definitionId=7&branchName=master)
[![GitLab Pipeline](https://img.shields.io/gitlab/pipeline/harisekhon/DevOps-Perl-tools?logo=gitlab&label=GitLab%20CI)](https://gitlab.com/HariSekhon/DevOps-Perl-tools/pipelines)
[![BitBucket Pipeline](https://img.shields.io/bitbucket/pipelines/harisekhon/devops-perl-tools/master?logo=bitbucket&label=BitBucket%20CI)](https://bitbucket.org/harisekhon/devops-perl-tools/addon/pipelines/home#!/)
[![AWS CodeBuild](https://img.shields.io/badge/AWS%20CodeBuild-ready-blue?logo=amazon%20aws)](https://github.com/HariSekhon/DevOps-Perl-tools/blob/master/buildspec.yml)
[![GCP Cloud Build](https://img.shields.io/badge/GCP%20Cloud%20Build-ready-blue?logo=google%20cloud)](https://github.com/HariSekhon/DevOps-Perl-tools/blob/master/cloudbuild.yaml)

[![Repo on Azure DevOps](https://img.shields.io/badge/repo-Azure%20DevOps-0078D7?logo=azure%20devops)](https://dev.azure.com/harisekhon/GitHub/_git/DevOps-Perl-tools)
[![Repo on GitHub](https://img.shields.io/badge/repo-GitHub-2088FF?logo=github)](https://github.com/HariSekhon/DevOps-Perl-tools)
[![Repo on GitLab](https://img.shields.io/badge/repo-GitLab-FCA121?logo=gitlab)](https://gitlab.com/HariSekhon/DevOps-Perl-tools)
[![Repo on BitBucket](https://img.shields.io/badge/repo-BitBucket-0052CC?logo=bitbucket)](https://bitbucket.org/HariSekhon/DevOps-Perl-tools)

[![GitHub Actions Ubuntu](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/GitHub%20Actions%20Ubuntu/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22GitHub+Actions+Ubuntu%22)
[![Mac](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Mac/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Mac%22)
[![Mac 10.15](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Mac%2010.15/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Mac+10.15)
[![Ubuntu](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Ubuntu/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Ubuntu%22)
[![Ubuntu 14.04](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Ubuntu%2014.04/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Ubuntu+14.04%22)
[![Ubuntu 16.04](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Ubuntu%2016.04/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Ubuntu+16.04%22)
[![Ubuntu 18.04](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Ubuntu%2018.04/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Ubuntu+18.04%22)
[![Ubuntu 20.04](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Ubuntu%2020.04/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Ubuntu+20.04%22)
[![Debian](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Debian/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Debian%22)
[![Debian 8](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Debian%208/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Debian+8%22)
[![Debian 9](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Debian%209/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Debian+9%22)
[![Debian 10](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Debian%2010/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Debian+10%22)
[![CentOS](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/CentOS/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22CentOS%22)
[![CentOS 7](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/CentOS%207/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22CentOS+7%22)
[![CentOS 8](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/CentOS%208/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22CentOS+8%22)
[![Fedora](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Fedora/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Fedora%22)
[![Alpine](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Alpine/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Alpine%22)
[![Alpine 3](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Alpine%203/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Alpine+3%22)
[![Perl](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl%22)
[![Perl 5.10](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.10/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.10%22)
[![Perl 5.12](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.12/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.12%22)
[![Perl 5.14](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.14/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.14%22)
[![Perl 5.16](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.16/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.16%22)
[![Perl 5.18](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.18/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.18%22)
[![Perl 5.20](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.20/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.20%22)
[![Perl 5.22](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.22/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.22%22)
[![Perl 5.24](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.24/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.24%22)
[![Perl 5.26](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.26/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.26%22)
[![Perl 5.28](https://github.com/HariSekhon/DevOps-Perl-tools/workflows/Perl%205.28/badge.svg)](https://github.com/HariSekhon/DevOps-Perl-tools/actions?query=workflow%3A%22Perl+5.28%22)

[git.io/perl-tools](https://git.io/perl-tools)

### Linux, Web, Anonymizer, SQL ReCaser, Hadoop, Hive, Solr, Big Data & NoSQL Tools

DevOps, Linux, SQL, Web, Big Data, NoSQL, templates for various programming languages and Kubernetes. All programs have `--help`.

See also the [DevOps Bash Tools](https://github.com/harisekhon/devops-bash-tools), [DevOps Python Tools](https://github.com/harisekhon/devops-python-tools) and [Advanced Nagios Plugins Collection](https://github.com/harisekhon/nagios-plugins) repos which contains hundreds more scripts and programs for Cloud, Big Data, SQL, NoSQL, Web and Linux.

Hari Sekhon

Cloud & Big Data Contractor, United Kingdom

[![My LinkedIn](https://img.shields.io/badge/LinkedIn%20Profile-HariSekhon-blue?logo=linkedin)](https://www.linkedin.com/in/harisekhon/)
###### (you're welcome to connect with me on LinkedIn)

##### Make sure you run ```make update``` if updating and not just ```git pull``` as you will often need the latest library submodule and possibly new upstream libraries

### Quick Start

#### Ready to run Docker image

All programs and their pre-compiled dependencies can be found ready to run on [DockerHub](https://hub.docker.com/r/harisekhon/tools/).

List all programs:

```
docker run harisekhon/perl-tools
```

Run any given program:

```
docker run harisekhon/perl-tools <program> <args>
```

#### Automated Build from source

installs git, make, pulls the repo and build the dependencies:

```
curl -L https://git.io/perl-bootstrap | sh
```

or manually

```
git clone https://github.com/harisekhon/devops-perl-tools perl-tools
cd perl-tools
make
```

Make sure to read [Detailed Build Instructions](https://github.com/HariSekhon/devops-perl-tools#detailed-build-instructions) further down for more information.

#### Optional: Generate self-contained Perl scripts with all dependencies built in to each file for easy distribution

After the `make` build has finished, if you want to make self-contained versions of all the perl scripts with all dependencies included for copying around, run:

```
make fatpacks
```

The self-contained scripts will be available in the `fatpacks/` directory which is also tarred to `fatpacks.tar.gz`.


### Usage ###

All programs come with a ```--help``` switch which includes a program description and the list of command line options.

Environment variables are supported for convenience and also to hide credentials from being exposed in the process list eg. ```$PASSWORD```. These are indicated in the ```--help``` descriptions in brackets next to each option and often have more specific overrides with higher precedence eg. ```$SOLR_HOST``` takes priority over ```$HOST```.


### Tools

##### NOTE: Hadoop HDFS API Tools, Pig => Elasticsearch/Solr, Pig Jython UDFs and authenticated PySpark IPython Notebook have moved to my [DevOps Python Tools](https://github.com/harisekhon/devops-python-tools) repo

- Linux:
  - ```anonymize.pl``` - anonymizes your configs / logs from files or stdin (for pasting to Apache Jira tickets or mailing lists)
    - anonymizes:
      - hostnames / domains / FQDNs
      - email addresses
      - IP + MAC addresses
      - Kerberos principals
      - [Cisco](https://www.cisco.com) & [Juniper](https://www.juniper.net) [ScreenOS](https://www.juniper.net/documentation/product/en_US/screenos) configurations passwords, shared keys and SNMP strings
    - ```anonymize_custom.conf``` - put regex of your Name/Company/Project/Database/Tables to anonymize to ```<custom>```
    - placeholder tokens indicate what was stripped out (eg. ```<fqdn>```, ```<password>```, ```<custom>```)
    - ```--ip-prefix``` leaves the last IP octect to aid in cluster debugging to still see differentiated nodes communicating with each other to compare configs and log communications
  - ```sqlcase.pl``` - capitalizes [SQL](https://en.wikipedia.org/wiki/SQL) code in files or stdin:
    - ```*case.pl``` - more specific language support for just about every database and SQL-like language out there plus a few more non-SQL languages like [Neo4j](https://neo4j.com) [Cypher](https://neo4j.com/developer/cypher-query-language/) and [Docker](https://www.docker.com)'s [Dockerfiles](https://docs.docker.com/engine/reference/builder/):
      - `athenacase.pl` - [AWS Athena](https://aws.amazon.com/athena/) SQL
      - `cqlcase.pl` - [Cassandra](http://cassandra.apache.org/) [CQL](http://cassandra.apache.org/doc/latest/cql/)
      - `cyphercase.pl` - [Neo4j](https://neo4j.com) [Cypher](https://neo4j.com/developer/cypher-query-language/)
      - `dockercase.pl` - [Docker](https://www.docker.com) ([Dockerfiles](https://docs.docker.com/engine/reference/builder/))
      - `drillcase.pl` - [Apache Drill](https://drill.apache.org/) SQL
      - `hivecase.pl` - [Hive](https://hive.apache.org) [HQL](https://cwiki.apache.org/confluence/display/Hive/LanguageManual)
      - `impalacase.pl` - [Impala](https://impala.apache.org) SQL
      - `influxcase.pl` - [InfluxDB](https://www.influxdata.com) [InfluxQL](https://docs.influxdata.com/influxdb/v1.7/query_language/spec/)
      - `mssqlcase.pl` - [Microsoft SQL Server](https://en.wikipedia.org/wiki/Microsoft_SQL_Server) SQL
      - `mysqlcase.pl` - [MySQL](https://www.mysql.com) SQL
      - `n1qlcase.pl` - [Couchbase](https://www.couchbase.com/) [N1QL](https://www.couchbase.com/products/n1ql)
      - `oraclecase.pl` / `plsqlcase.pl` - [Oracle](https://www.oracle.com/uk/index.html) SQL
      - `postgrescase.pl` / `pgsqlcase.pl` - [PostgreSQL](https://www.postgresql.org) SQL
      - `pigcase.pl` - [Pig](https://pig.apache.org) [Latin](https://pig.apache.org/docs/r0.17.0/basic.html)
      - `prestocase.pl` - [Presto](https://prestosql.io/) SQL
      - `redshiftcase..pl` - [AWS Redshift](https://aws.amazon.com/redshift/) SQL
      - `snowflakecase..pl` - [Snowflake](https://www.snowflake.com) SQL
    - written to help clean up docs and SQL scripts (I don't even bother writing capitalised SQL code any more I just run it through this via a vim shortcut)
  - ```diffnet.pl``` - simplifies diff output to show only lines added/removed, not moved, from patch files or stdin (pipe from standard diff command)
  - ```xml_diff.pl``` / ```hadoop_config_diff.pl``` - tool to help find differences between XML / Hadoop configs, can diff XML from HTTP addresses to diff live running clusters
  - ```titlecase.pl``` - capitalizes the first letter of each input word in files or stdin
  - ```pdf_to_txt.pl``` - converts PDF to text for analytics (see also [Apache PDFBox](https://pdfbox.apache.org/) and pdf2text unix tool)
  - ```java_show_classpath.pl``` - shows java classpaths of a running Java program in a sane way
  - ```flock.pl``` - file locking to prevent running the same program twice at the same time. RHEL 6 now has a native version of this
  - ```uniq_order_preserved.pl``` - like `uniq` but you don't have to sort first and it preserves the ordering
  - ```colors.pl``` - prints ASCII color code matrix of all foreground + background combinations showing the corresponding terminal escape codes to help with tuning your shell
  - ```matrix.pl``` - prints a cool matrix of vertical scrolling characters using terminal tricks
  - ```welcome.pl``` - cool spinning welcome message greeting your username and showing last login time and user to put in your shell's ```.profile``` (there is also a python version in my [DevOps Python Tools](https://github.com/harisekhon/devops-python-tools) repo)

- Web:
  - ```watch_url.pl``` - watches a given url, outputting status code and optionally selected output, useful for debugging web farms behind load balancers and seeing the distribution to different servers (tip: set a /hostname handler to return which server you're hitting for each request in real-time). I also use this a ping replacement to google.com to check internet networking in environments where everything except HTTP traffic is blocked
  - ```watch_nginx_stats.pl``` - watches nginx stats via the HttpStubStatusModule module

- [Hadoop](https://hadoop.apache.org/) Ecosystem:
  - ```ambari_freeipa_kerberos_setup.pl``` - Automates Hadoop [Ambari](https://ambari.apache.org/) cluster security Kerberos setup of [FreeIPA](https://www.freeipa.org/page/Main_Page) principals and keytab distribution to the cluster nodes
  - ```hadoop_hdfs_file_age_out.pl``` - prints or removes all [Hadoop HDFS](https://hadoop.apache.org/) files in a given directory tree older than a specified age
  - ```hadoop_hdfs_snapshot_age_out.pl``` - prints or removes [Hadoop HDFS](https://hadoop.apache.org/) snapshots older than a given age or matching a given regex pattern
  - ```hbase_flush_tables.sh``` - flushes all or selected [HBase](https://hbase.apache.org/) tables (useful when bulk loading [OpenTSDB](http://opentsdb.net/) with Durability.SKIP_WAL) (there is also a Python version of this in my [DevOps Python Tools](https://github.com/harisekhon/devops-python-tools) repo)
  - ```hive_to_elasticsearch.pl``` - bulk indexes structured [Hive](https://hive.apache.org/) tables in [Hadoop](https://hadoop.apache.org/) to [Elasticsearch](https://www.elastic.co/) clusters - includes support for Kerberos, Hive partitioned tables with selected partitions, selected columns, index creation with configurable sharding, index aliasing and optimization
  - ```hive_table_print_null_columns.pl``` - finds [Hive](https://hive.apache.org/) columns with all NULLs (see newer versions in [DevOps Python tools](https://github.com/harisekhon/devops-python-tools) repo for [HiveServer2](https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Overview) and [Impala](https://impala.apache.org/))
  - ```hive_table_count_rows_with_nulls.pl``` - counts number of rows containing NULLs in any field
  - ```pentaho_backup.pl``` - script to back up the local [Pentaho](https://marketplace.hitachivantara.com/pentaho/) BA or DI Server
  - ```ibm_bigsheets_config_git.pl``` - revision controls [IBM BigSheets](https://www.ibm.com/support/knowledgecenter/SSPT3X_3.0.0/com.ibm.swg.im.infosphere.biginsights.analyze.doc/doc/c0057518.html) configurations from API to Git
  - ```datameer_config_git.pl``` - revision controls [Datameer](https://www.datameer.com/) configurations from API to Git
  - ```hadoop_config_diff.pl``` - tool to diff configs between [Hadoop](https://hadoop.apache.org/) clusters XML from files or live HTTP config endpoints
  - ```solr_cli.pl``` - [Solr](https://lucene.apache.org/solr/) CLI tool for fast and easy [Solr](https://lucene.apache.org/solr/) / [SolrCloud](https://lucene.apache.org/solr/guide/6_6/solrcloud.html) administration. Supports optional environment variables to minimize --switches (can be set permanently in `solr/solr-env.sh`). Uses the Solr Cores and Collections APIs, makes Solr administration a lot easier


### Detailed Build Instructions

The 'make' command will initialize my library submodule and  use 'sudo' to install the required system packages and CPAN modules. If you want more control over what is installed you must follow the [Manual Setup](https://github.com/harisekhon/devops-perl-tools#manual-setup) section instead.

##### Perlbrew localized installs

The automated build will use 'sudo' to install required Perl CPAN libraries to the system unless running as root or it detects being inside Perlbrew. If you want to install some of the common Perl libraries such as Net::DNS and LWP::* using your OS packages instead of installing from CPAN then follow the Manual Build section below.


#### Manual Setup ####

Enter the tools directory and run git submodule init and git submodule update to fetch my library repo and then install the CPAN modules as mentioned further down:

```
git clone https://github.com/harisekhon/devops-perl-tools perl-tools
cd tools
git submodule update --init
```

Then proceed to install the CPAN modules below by hand.


###### CPAN Modules

Install the following CPAN modules using the cpan command, using sudo if you're not root:

```
sudo cpan JSON LWP::Simple LWP::UserAgent Term::ReadKey Text::Unidecode Time::HiRes XML::LibXML XML::Validate ...
```

The full list of CPAN modules is in ```setup/cpan-requirements.txt```.

You can install the entire list of cpan requirements like so:

```
sudo cpan $(sed 's/#.*//' < setup/cpan-requirements.txt)
```

You're now ready to use these programs.


#### Offline Setup

Download the Tools and Lib git repos as zip files:

[https://github.com/HariSekhon/devops-perl-tools/archive/master.zip](https://github.com/HariSekhon/devops-perl-tools/archive/master.zip)

[https://github.com/HariSekhon/lib/archive/master.zip](https://github.com/HariSekhon/lib/archive/master.zip)

Unzip both and move Lib to the ```lib``` folder under Tools.

```
unzip devops-perl-tools-master.zip
unzip lib-master.zip

mv -v devops-perl-tools-master perl-tools
mv -v lib-master lib
mv -vf lib perl-tools/
```

Proceed to install CPAN modules for whichever programs you want to use using your standard procedure - usually an internal mirror or proxy server to CPAN, or rpms / debs (some libraries are packaged by Linux distributions).

All CPAN modules are listed in the ```setup/cpan-requirements.txt``` file.


#### Configuration for Strict Domain / FQDN validation ####

Strict validations include host/domain/FQDNs using TLDs which are populated from the official IANA list. This is done via my [Lib](https://github.com/harisekhon/lib) submodule - see there for details on configuring to permit custom TLDs like `.local`, `.intranet`, `.vm`, `.cloud` etc. (all already included in there because they're common across companies internal environments).


### Updating

Run ```make update```. This will git pull and then git submodule update which is necessary to pick up corresponding library updates.

If you update often and want to just quickly git pull + submodule update but skip rebuilding all those dependencies each time then run ```make update-no-recompile``` (will miss new library dependencies - do full ```make update``` if you encounter issues).


### Testing

[Continuous Integration](https://travis-ci.org/HariSekhon/devops-perl-tools) is run on this repo with tests for success and failure scenarios:

- unit tests for the custom supporting [perl library](https://github.com/harisekhon/lib)
- integration tests of the top level programs using the libraries for things like option parsing
- [functional tests](https://github.com/HariSekhon/devops-perl-tools/tree/master/tests) for the top level programs using local test data and [Docker containers](https://hub.docker.com/u/harisekhon/)

To trigger all tests run:

```
make test
```

which will start with the underlying libraries, then move on to top level integration tests and functional tests using docker containers if docker is available.


### Contributions

Patches, improvements and even general feedback are welcome in the form of GitHub pull requests and issue tickets.


### See Also

* [DevOps Bash Tools](https://github.com/harisekhon/devops-bash-tools) - 550+ DevOps Bash Scripts, Advanced `.bashrc`, `.vimrc`, `.screenrc`, `.tmux.conf`, `.gitconfig`, CI configs & Utility Code Library - AWS, GCP, Kubernetes, Docker, Kafka, Hadoop, SQL, BigQuery, Hive, Impala, PostgreSQL, MySQL, LDAP, DockerHub, Jenkins, Spotify API & MP3 tools, Git tricks, GitHub API, GitLab API, BitBucket API, Code & build linting, package management for Linux / Mac / Python / Perl / Ruby / NodeJS / Golang, and lots more random goodies

* [SQL Scripts](https://github.com/HariSekhon/SQL-scripts) - 100+ SQL Scripts - PostgreSQL, MySQL, AWS Athena, Google BigQuery

* [Templates](https://github.com/HariSekhon/Templates) - dozens of Code & Config templates - AWS, GCP, Docker, Jenkins, Terraform, Vagrant, Puppet, Python, Bash, Go, Perl, Java, Scala, Groovy, Maven, SBT, Gradle, Make, GitHub Actions Workflows, CircleCI, Jenkinsfile, Makefile, Dockerfile, docker-compose.yml, M4 etc.

* [Kubernetes templates](https://github.com/HariSekhon/Kubernetes-templates) - Kubernetes YAML templates - Best Practices, Tips & Tricks are baked right into the templates for future deployments

* [DevOps Python Tools](https://github.com/harisekhon/devops-python-tools) - 80+ DevOps CLI tools for AWS, Hadoop, HBase, Spark, Log Anonymizer, Ambari Blueprints, AWS CloudFormation, Linux, Docker, Spark Data Converters & Validators (Avro / Parquet / JSON / CSV / INI / XML / YAML), Elasticsearch, Solr, Travis CI, Pig, IPython

* [The Advanced Nagios Plugins Collection](https://github.com/harisekhon/nagios-plugins) - 450+ programs for Nagios monitoring your Hadoop & NoSQL clusters. Covers every Hadoop vendor's management API and every major NoSQL technology (HBase, Cassandra, MongoDB, Elasticsearch, Solr, Riak, Redis etc.) as well as message queues (Kafka, RabbitMQ), continuous integration (Jenkins, Travis CI) and traditional infrastructure (SSL, Whois, DNS, Linux)

* [HAProxy Configs](https://github.com/HariSekhon/HAProxy-configs) - 80+ HAProxy Configs for Hadoop, Big Data, NoSQL, Docker, Elasticsearch, SolrCloud, HBase, Cloudera, Hortonworks, MapR, MySQL, PostgreSQL, Apache Drill, Hive, Presto, Impala, ZooKeeper, OpenTSDB, InfluxDB, Prometheus, Kibana, Graphite, SSH, RabbitMQ, Redis, Riak, Rancher etc.

* [Dockerfiles](https://github.com/HariSekhon/Dockerfiles) - 50+ DockerHub public images for Docker & Kubernetes - Hadoop, Kafka, ZooKeeper, HBase, Cassandra, Solr, SolrCloud, Presto, Apache Drill, Nifi, Spark, Mesos, Consul, Riak, OpenTSDB, Jython, Advanced Nagios Plugins & DevOps Tools repos on Alpine, CentOS, Debian, Fedora, Ubuntu, Superset, H2O, Serf, Alluxio / Tachyon, FakeS3

* [Perl Lib](https://github.com/harisekhon/lib) - my personal Perl library leveraged in this repo as a submodule

* [PyLib](https://github.com/harisekhon/pylib) - Python port of the above library

You might also be interested in the following really nice Jupyter notebook for HDFS space analysis created by another Hortonworks guy Jonas Straub:

* [https://github.com/mr-jstraub/HDFSQuota/blob/master/HDFSQuota.ipynb](https://github.com/mr-jstraub/HDFSQuota/blob/master/HDFSQuota.ipynb)

### Stargazers over time

[![Stargazers over time](https://starchart.cc/HariSekhon/DevOps-Perl-tools.svg)](https://starchart.cc/HariSekhon/DevOps-Perl-tools)

[git.io/perl-tools](https://git.io/perl-tools)
